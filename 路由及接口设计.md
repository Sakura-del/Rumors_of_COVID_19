# 路由及接口设计

---

## 首页



### 列出谣言

---

#### 请求消息

```python
GET 	/home	 HTTP/1.1
```

#### 请求参数

http 请求消息url 中需携带以下参数，

* action

  必填项，填写值为list_rumors

#### 响应消息

```python
HTTP/1.1 200 OK
Content-Type:application/json
```

#### 响应内容

http 响应消息body中，数据以 json 格式存储，

获取成功：

```python
{
    "ret": 0,
    "retlist":[
        {
        "id": 1,
        "title": "来自意大利的“真相”：“新冠”不是病毒，而是细菌",
        "date": "2021-03-25",
        "markstyle": "fake",
        "result": "假",
        "explain": "谣言",
        "tag": [
          "新冠病毒",
          "细菌"
        ],
        "videourl": "",
        "cover": "//jiaozhen-70111.picnjc.qpic.cn/hmrevqgASWu1Qc7iKJ22z?imageView2/2/w/150/h/90",
        "coverrect": "//jiaozhen-70111.picnjc.qpic.cn/hmrevqgASWu1Qc7iKJ22z",
        "coversqual": "//jiaozhen-70111.picnjc.qpic.cn/hmrevqgASWu1Qc7iKJ22z?imageView2/2/w/300/h/300"
        }
    ]
    "total": 1
}
```

ret为零代表数据传送成功

total代表总共多少条谣言

retlist包含谣言的详细信息:

* id：谣言编号
* title：谣言标题
* date：发布日期
* markstyle：谣言标记
  1. false：假
  2. true：真
  3. doubt：尚未定论
* result：谣言鉴定结果
* explain：解释
* tag：标签
* videourl：视频地址
* cover：标签图
* coverrect：大图
* coversqual：中图

每条谣言信息以如下形式存储

```python
{
        "id": 1,
        "title": "来自意大利的“真相”：“新冠”不是病毒，而是细菌",
        "date": "2021-03-25",
        "markstyle": "fake",
        "result": "假",
        "explain": "谣言",
        "tag": [
          "新冠病毒",
          "细菌"
        ],
        "videourl": "",
        "cover": "//jiaozhen-70111.picnjc.qpic.cn/hmrevqgASWu1Qc7iKJ22z?imageView2/2/w/150/h/90",
        "coverrect": "//jiaozhen-70111.picnjc.qpic.cn/hmrevqgASWu1Qc7iKJ22z",
        "coversqual": "//jiaozhen-70111.picnjc.qpic.cn/hmrevqgASWu1Qc7iKJ22z?imageView2/2/w/300/h/300"
}
```

---







### 查询谣言

---

#### 请求消息

```python
GET 	/home	 HTTP/1.1
Content-Type:application/json
```

#### 请求参数

http 请求消息url 中需携带以下参数，

* action

  必填项，填写值为get_rumors

* title

  必填项，填写值为用户输入的待查询内容

#### 响应消息

```python
HTTP/1.1 200 OK
Content-Type:application/json
```

#### 响应内容

http 响应消息body中，数据以json 格式存储，

获取成功：

```python
{
    "ret": 0,
    "retlist":[
            {
                "id": 0,
                "title": "新冠病毒早已藏在世界各地，处于休眠状态 ",
                "author": "韩越",
                "authordesc": "剑桥大学病毒学博士后",
                "date": "2020-07-09",
                "markstyle": "doubt",
                "result": "疑",
                "explain": "尚无定论",
                "abstract": "牛津大学汤姆·杰斐逊博士在接受英国《每日电讯报》采访时确实表示，很多证据表明新冠病毒可能在亚洲出现之前就已经存在，比如多国在早前的废水样本中检出新冠病毒。但此观点存在漏洞，只通过废水检测结果无法得出当时病毒已流行的结论，还需要更多的证据，尤其是临床上的证据。杰斐逊博士“新冠病毒早就存在于世界各地，并处于休眠状态，然后在环境条件适宜的时候出现感染人类”的观点也存疑，新冠病毒在环境中的稳定性相对较差，所以长期处于休眠状态的可能性是非常小的。以上观点仅是杰斐逊博士接受采访时的个人观点，缺少依据，也并非相关研究得出的结论，更不是 “牛津大学研究结论”，部分媒体的报道具有一定的误导性。",
                "tag": [
                  "新冠病毒",
                  "废水检测"
                ],
                "type": 1,
                "videourl": "",
                "cover": "//jiaozhen-70111.picnjc.qpic.cn/7b9Kjoh5xdDpSos1qqgJeH?imageView2/2/w/150/h/90",
                "coverrect": "//jiaozhen-70111.picnjc.qpic.cn/7b9Kjoh5xdDpSos1qqgJeH",
                "coversqual": "//jiaozhen-70111.picnjc.qpic.cn/7b9Kjoh5xdDpSos1qqgJeH?imageView2/2/w/300/h/300",
                "section": "",
                "iscolled": false,
                "arttype": "normal"
             }
    ]
    "total": 1
}
```

ret 为零代表数据传送成功

total 代表总共多少条谣言

retlist 包含谣言的详细信息:

* id：谣言编号
* title：谣言标题
* author：作者
* authordesc：作者机构
* date：发布日期
* markstyle：谣言标记
  1. false：假
  2. true：真
  3. doubt：尚未定论
* result：谣言鉴定结果
* explain：解释
* abstract：详细信息
* tag：标签
* videourl：视频地址
* cover：标签图
* coverrect：大图
* coversqual：中图

每条谣言信息以如下形式存储

```python
 {
                "id": 0,
                "title": "新冠病毒早已藏在世界各地，处于休眠状态 ",
                "author": "韩越",
                "authordesc": "剑桥大学病毒学博士后",
                "date": "2020-07-09",
                "markstyle": "doubt",
                "result": "疑",
                "explain": "尚无定论",
                "abstract": "牛津大学汤姆·杰斐逊博士在接受英国《每日电讯报》采访时确实表示，很多证据表明新冠病毒可能在亚洲出现之前就已经存在，比如多国在早前的废水样本中检出新冠病毒。但此观点存在漏洞，只通过废水检测结果无法得出当时病毒已流行的结论，还需要更多的证据，尤其是临床上的证据。杰斐逊博士“新冠病毒早就存在于世界各地，并处于休眠状态，然后在环境条件适宜的时候出现感染人类”的观点也存疑，新冠病毒在环境中的稳定性相对较差，所以长期处于休眠状态的可能性是非常小的。以上观点仅是杰斐逊博士接受采访时的个人观点，缺少依据，也并非相关研究得出的结论，更不是 “牛津大学研究结论”，部分媒体的报道具有一定的误导性。",
                "tag": [
                  "新冠病毒",
                  "废水检测"
                ],
                "type": 1,
                "videourl": "",
                "cover": "//jiaozhen-70111.picnjc.qpic.cn/7b9Kjoh5xdDpSos1qqgJeH?imageView2/2/w/150/h/90",
                "coverrect": "//jiaozhen-70111.picnjc.qpic.cn/7b9Kjoh5xdDpSos1qqgJeH",
                "coversqual": "//jiaozhen-70111.picnjc.qpic.cn/7b9Kjoh5xdDpSos1qqgJeH?imageView2/2/w/300/h/300",
                "section": "",
                "iscolled": false,
                "arttype": "normal"
             }
```

获取失败

```python
{
    "ret": 1,
    "msg": "未查到相关信息"
}
```

---







### 检测谣言(待实现)

---

#### 请求消息

```python
GET 	/home	 HTTP/1.1
Content-Type:application/json
```

#### 请求参数

http 请求消息url 中需携带以下参数，

* action

  必填项，填写值为judge_rumor

* title

  必填项，填写值为用户输入的待查询内容

#### 响应消息

```python
HTTP/1.1 200 OK
Content-Type:application/json
```

#### 响应内容

http 响应消息body中，数据以json 格式存储，

获取成功：

```python
{
    "ret": 0,
    "degree": 0.5
    "news": {
        "id": 1,
        "pubdate": "2019/12/31 13:38",
        "title": "武汉发现 27 例肺炎病例",
        "infosource": "武汉市卫健委",
        "sourceurl": "http://wjw.wuhan.gov.cn/front/web/showDetail/2019123108989"
    }
}
```

ret 为零代表数据传送成功

degree 代表真实性程度，0为假，1为真

news 代表相关新闻的详细信息：

1. id：新闻的ID
2. pubdate：发布时间
3. title：新闻标题
4. infosource：消息来源
5. sourceurl：消息来源网址

每条新闻以如下形式存储

```python
{
        "id": 1,
        "pubdate": "2019/12/31 13:38",
        "title": "武汉发现 27 例肺炎病例",
        "infosource": "武汉市卫健委",
        "sourceurl": "http://wjw.wuhan.gov.cn/front/web/showDetail/2019123108989"
}
```

获取失败

```python
{
    "ret": 1,
    "msg": "未查到相关信息"
}
```

---







## 详情页

---



### 新闻详情

---

#### 请求消息

```python
GET 	/details/news/	 HTTP/1.1
Content-Type:application/json
```

#### 请求参数

http 请求消息url 中需携带以下参数，

* action

  必填项，填写值为get_news

* title

  必填项，填写值为用户选中的新闻标题

#### 响应消息

```python
HTTP/1.1 200 OK
Content-Type:application/json
```

#### 响应内容

http响应消息body中，数据以json格式存储，

获取成功：

```python
{
    "ret": 0,
    "retlist": [
        {
        "id": 1,
        "pubdate": "2019/12/31 13:38",
        "title": "武汉发现 27 例肺炎病例",
        "mainsummary": "近期部分医疗机构发现接诊的多例肺炎病例与华南海鲜城有关联。目前已发现 27 例病例，其中 7 例病情严重，其余病例病情稳定可控，有 2 例病情好转拟于近期出院。",
        "infosource": "武汉市卫健委",
        "sourceurl": "http://wjw.wuhan.gov.cn/front/web/showDetail/2019123108989"
    }
    ]
    "news": [
        {
        "id": 2,
        "pubdate": "2020/1/3 17:00",
        "title": "武汉共发现病毒性肺炎诊断患者 44 例",
        "mainsummary": "截止 8 时，共发现符合不明原因的病毒性肺炎诊断患者 44 例，其中重症 11 例，其余患者生命体征总体稳定。目前所有病例均在武汉市医疗机构接受隔离治疗，已经追踪到 121 名密切接触者并行医学观察。",
        "infosource": "武汉市卫健委",
        "sourceurl": "http://wjw.wuhan.gov.cn/front/web/showDetail/2020010309017"
    }
    ]
    "total": 1
}
```

ret 为零代表数据传送成功

retlist 代表查看的新闻详情：

* id：新闻的ID

* pubdate：发布时间

* title：新闻标题
* mainsummary：新闻概要

* infosource：消息来源

* sourceurl：消息来源网址

news 代表相关新闻的详细信息：

* id：新闻的ID

* pubdate：发布时间

* title：新闻标题
* mainsummary：新闻概要

* infosource：消息来源

* sourceurl：消息来源网址

total：相关新闻的总数

每条新闻信息以如下形式存储

```python
{
        "id": 1,
        "pubDate": "2019/12/31 13:38",
        "title": "武汉发现 27 例肺炎病例",
        "mainsummary": "近期部分医疗机构发现接诊的多例肺炎病例与华南海鲜城有关联。目前已发现 27 例病例，其中 7 例病情严重，其余病例病情稳定可控，有 2 例病情好转拟于近期出院。",
        "infosource": "武汉市卫健委",
        "sourceurl": "http://wjw.wuhan.gov.cn/front/web/showDetail/2019123108989"
}
```

获取失败

```python
{    
    "ret": 1,
    "msg": "信息获取失败"
}
```

---







### 谣言详情

---

#### 请求消息

```python
GET 	/details/rumors	 HTTP/1.1
Content-Type:application/json
```

#### 请求参数

http 请求消息url 中需携带以下参数，

* action

  必填项，填写值为get_rumor

* title

  必填项，填写值为用户输入的待查询内容

#### 响应消息

```python
HTTP/1.1 200 OK
Content-Type:application/json
```

#### 响应内容

http 响应消息body中，数据以json 格式存储，

获取成功：

```python
{
    "ret": 0,
    "retlist":[
            {
                "id": 0,
                "title": "新冠病毒早已藏在世界各地，处于休眠状态 ",
                "author": "韩越",
                "authordesc": "剑桥大学病毒学博士后",
                "date": "2020-07-09",
                "markstyle": "doubt",
                "result": "疑",
                "explain": "尚无定论",
                "abstract": "牛津大学汤姆·杰斐逊博士在接受英国《每日电讯报》采访时确实表示，很多证据表明新冠病毒可能在亚洲出现之前就已经存在，比如多国在早前的废水样本中检出新冠病毒。但此观点存在漏洞，只通过废水检测结果无法得出当时病毒已流行的结论，还需要更多的证据，尤其是临床上的证据。杰斐逊博士“新冠病毒早就存在于世界各地，并处于休眠状态，然后在环境条件适宜的时候出现感染人类”的观点也存疑，新冠病毒在环境中的稳定性相对较差，所以长期处于休眠状态的可能性是非常小的。以上观点仅是杰斐逊博士接受采访时的个人观点，缺少依据，也并非相关研究得出的结论，更不是 “牛津大学研究结论”，部分媒体的报道具有一定的误导性。",
                "tag": [
                  "新冠病毒",
                  "废水检测"
                ],
                "type": 1,
                "videourl": "",
                "cover": "//jiaozhen-70111.picnjc.qpic.cn/7b9Kjoh5xdDpSos1qqgJeH?imageView2/2/w/150/h/90",
                "coverrect": "//jiaozhen-70111.picnjc.qpic.cn/7b9Kjoh5xdDpSos1qqgJeH",
                "coversqual": "//jiaozhen-70111.picnjc.qpic.cn/7b9Kjoh5xdDpSos1qqgJeH?imageView2/2/w/300/h/300",
                "section": "",
                "iscolled": false,
                "arttype": "normal"
             }
    ],
    "news": [
        {
        "id": 2,
        "pubdate": "2020/1/3 17:00",
        "title": "武汉共发现病毒性肺炎诊断患者 44 例",
        "mainsummary": "截止 8 时，共发现符合不明原因的病毒性肺炎诊断患者 44 例，其中重症 11 例，其余患者生命体征总体稳定。目前所有病例均在武汉市医疗机构接受隔离治疗，已经追踪到 121 名密切接触者并行医学观察。",
        "infosource": "武汉市卫健委",
        "sourceurl": "http://wjw.wuhan.gov.cn/front/web/showDetail/2020010309017"
    }
    ],
    "total": 1
}
```

ret 为零代表数据传送成功

retlist 包含谣言的详细信息:

* id：谣言编号
* title：谣言标题
* author：作者
* authordesc：作者机构
* date：发布日期
* markstyle：谣言标记
  1. false：假
  2. true：真
  3. doubt：尚未定论
* result：谣言鉴定结果
* explain：解释
* abstract：详细信息
* tag：标签
* videourl：视频地址
* cover：标签图
* coverrect：大图
* coversqual：中图

news 代表相关新闻的详细信息：

* id：新闻的ID

* pubdate：发布时间

* title：新闻标题
* mainsummary：新闻概要

* infosource：消息来源

* sourceurl：消息来源网址

total：相关新闻的总数

每条谣言信息以如下形式存储

```python
{
      "id": 1,
      "title": "某某城市飞机喷洒消毒药水？",
      "mainsummary": "深圳市互联网信息办公室：是谣言",
      "body": "武汉、杭州、郑州等各城市版本的「飞机喷洒消毒药水」都是谣言！",
      "rumortype": 0,
      "crawltime": "2020/1/29 0:47"
}
```

获取失败

```python
{
    "ret": 1,
    "msg": "信息获取失败"
}
```

---









## 可视化界面

---



### 获取数据(暂定)

---

#### 请求消息

```python
GET     /shows	 HTTP/1.1
```

#### 请求参数

无

#### 响应消息

```python
HTTP/1.1 200 OK
Content-Type:application/json
```

#### 响应内容

http 响应消息body中，数据以json 格式存储，

获取成功：

```python
{
    "ret": 0,
    "retlist": [
        {     
    "id": 1,
    "title": "某某城市飞机喷洒消毒药水？",
    "mainsummary": "深圳市互联网信息办公室：是谣言",
    "body": "武汉、杭州、郑州等各城市版本的「飞机喷洒消毒药水」都是谣言！",
    "rumortype": 0,
    "crawltime": "2020/1/29 0:47"
    }
    ]
    "total": 1
}
```

ret 为零代表数据传送成功

retlist 包含查看的谣言的详细信息:

* id：谣言的ID
* title：谣言的标题
* mainsummary：内容简介
* body：内容详情
* rumortype：谣言类型：
  0. 是谣言
  1. 不是
  2. 尚未确定
* crawltime：发布时间

total：相关新闻的总数

每条新闻信息以如下形式存储

```python
{     
    "id": 1,
    "title": "某某城市飞机喷洒消毒药水？",
    "mainsummary": "深圳市互联网信息办公室：是谣言",
    "body": "武汉、杭州、郑州等各城市版本的「飞机喷洒消毒药水」都是谣言！",
    "rumortype": 0,
    "crawltime": "2020/1/29 0:47"
}
```

获取失败

```python
{    
    "ret": 1,
    "msg": "信息获取失败"
}
```

---







## 疫情详情页

---



### 当前国内疫情

---

#### 请求消息

```python
GET     /covid/current	 HTTP/1.1
Content-Type: application/json
```

#### 请求参数

http 请求消息url 中需携带以下参数，

* action

  必填项，填写值为list_current_internal


#### 响应消息

```python
HTTP/1.1 200 OK
Content-Type:application/json
```

#### 响应内容

http 响应消息body中，数据以json 格式存储，

获取成功：

```python
{
    "ret": 0,
    "data": [
        {  
            "confirmedCount": 217,
            "confirmedIncr": 217,
            "curedCount": 25,
            "curedIncr": 25,
            "currentConfirmedCount": 188,
            "currentConfirmedIncr": 188,
            "deadCount": 4,
            "deadIncr": 4,
            "currentAsymCount": 267,
            "currentAsymIncr": 0,
            "suspectedCount": 5254,
            "suspectedCountIncr": 11,  
            "date": "2021-3-30",
    }
    ],
    "message": ""
}
```

ret 为零代表数据传送成功

data 包含查看的谣言的详细信息:

* confirmedCount：确诊人数
* confirmedIncr：新增确诊人数
* curedCount：治愈人数
* curedIncr：新增治愈人数
* currentConfirmedCount：现存确诊人数
* currentConfirmedIncr：新增现存确诊人数
* dateId：统计日期
* deadCount：死亡人数
* deadIncr：新增死亡人数
* currentAsymCount：疑似人数
* currentAsymCountIncr：疑似新增人数
* suspectedCount：境外输入人数
* suspectedCountIncr：新增境外输入
* date：日期

message：返回消息，无则为空

每条国内疫情信息以如下形式存储

```python
{  
            "confirmedCount": 217,
            "confirmedIncr": 217,
            "curedCount": 25,
            "curedIncr": 25,
            "currentConfirmedCount": 188,
            "currentConfirmedIncr": 188,
            "deadCount": 4,
            "deadIncr": 4,
            "currentAsymCount": 267,
            "currentAsymIncr": 0,
            "suspectedCount": 5254,
            "suspectedCountIncr": 11,  
            "date": "2021-3-30",
}
```

获取失败

```python
{    
    "ret": 1,
    "msg": "信息获取失败"
}
```

---









### 当前全球疫情

---

#### 请求消息

```python
GET     /covid/overall	 HTTP/1.1
Content-Type: application/json
```

#### 请求参数

http 请求消息url 中需携带以下参数，

* action

  必填项，填写值为list_current_global


#### 响应消息

```python
HTTP/1.1 200 OK
Content-Type:application/json
```

#### 响应内容

http 响应消息body中，数据以json 格式存储，

获取成功：

```python
{
    "ret": 0,
    "data": [
        {  
            "confirmedCount": 217,
            "confirmedIncr": 217,
            "curedCount": 25,
            "curedIncr": 25,
            "currentConfirmedCount": 188,
            "currentConfirmedIncr": 188,
            "deadCount": 4,
            "deadIncr": 4, 
            "date": "2021-3-30"
    }
    ],
    "message": ""
}
```

ret 为零代表数据传送成功

data 包含查看的谣言的详细信息:

* confirmedCount：确诊人数
* confirmedIncr：新增确诊人数
* curedCount：治愈人数
* curedIncr：新增治愈人数
* currentConfirmedCount：现存确诊人数
* currentConfirmedIncr：新增现存确诊人数
* dateId：统计日期
* deadCount：死亡人数
* deadIncr：新增死亡人数
* date：日期

message：返回消息，无则为空

每条国内疫情信息以如下形式存储

```python
{  
            "confirmedCount": 217,
            "confirmedIncr": 217,
            "curedCount": 25,
            "curedIncr": 25,
            "currentConfirmedCount": 188,
            "currentConfirmedIncr": 188,
            "deadCount": 4,
            "deadIncr": 4, 
            "date": "2021-3-30"
}
```

获取失败

```python
{    
    "ret": 1,
    "msg": "信息获取失败"
}
```

---



